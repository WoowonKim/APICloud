# í¬íŒ… ë§¤ë‰´ì–¼

ApiCloud í¬íŒ… ë§¤ë‰´ì–¼ì…ë‹ˆë‹¤.

## ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê¸°ìˆ ìŠ¤íƒ](#-í”„ë¡œì íŠ¸-ê¸°ìˆ -ìŠ¤íƒ)
2. [Backend ë¹Œë“œ ê°€ì´ë“œ](#-backend-ë¹Œë“œ-ê°€ì´ë“œ)
3. [Frontend ë¹Œë“œ ê°€ì´ë“œ](#-frontend-ë¹Œë“œ-ê°€ì´ë“œ)
4. [S3 ì„¤ì •](#-amazon-s3-ì„¤ì •)
5. [OAuth ì„¤ì •](#-oauth--ì„¤ì •)
   <br>

## ğŸ”¨ í”„ë¡œì íŠ¸ ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ë¶„ | ì¢…ë¥˜             | ê¸°ìˆ ìŠ¤íƒ           | ë²„ì „    |
| ---- | ---------------- | ------------------ | ------- |
| BE   | IDE              | IntelliJ IDE       | -       |
|      | Development-Java | Java JDK           | zulu 11 |
|      |                  | SpringBoot         | 2.7.4   |
|      |                  | Spring Data JPA    | -       |
|      |                  | Spring Security    | -       |
|      |                  | Spring Validation  | -       |
|      |                  | MySQL              | 8.0.30  |
|      | Build Tool       | Gradle             | -       |
|      | CI/CD            | AWS EC2            | -       |
|      |                  | Nginx              | -       |
|      |                  | Docker             | -       |
|      |                  | Jenkins            | -       |
| FE   | IDE              | Visual Studio Code | -       |
|      | Development      | React              | 3.2.13  |
|      |                  | Redux              | 4.0.2   |
| ê³µí†µ |                  | GitLab             | -       |
|      | Issue            | Jira               | -       |
|      | Communication    | Notion             | -       |
|      |                  | Matermost          | -       |

## ğŸ“ Backend ë¹Œë“œ ê°€ì´ë“œ

> ### **ì‹¤í–‰**

    src > main > java > com > web > apicloud > ApicloudApplication.java ì‹¤í–‰

> ### **ë¹Œë“œ**

- gradle ì„ ì‚¬ìš©í•œ ë¹Œë“œ

  - gradle ì„¤ì¹˜ê°€ ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´ ì„¤ì¹˜ í›„ ë¹Œë“œ ì§„í–‰

  ```bash
  // Windows 10 í™˜ê²½
  gradlew build --exclude-task test

  // ubuntu í™˜ê²½
  chmod +x gradlew
  ./gradlew build --exclude-task test
  ```

- IDE ì„ ì‚¬ìš©í•œ ë¹Œë“œ

  - IntelliJì—ì„œ bootJar í´ë¦­

  - build/libs ì—ì„œ ìƒì„±ëœ jar íŒŒì¼ í™•ì¸

> ### **DataBase**

ë¡œì»¬ í™˜ê²½ì—ì„œ MySQL Workbench ì„¤ì¹˜ ë° ì‹¤í–‰

src > main > resources > application.propertiesì˜ ê°’ì„ ìˆ˜ì •í•˜ì—¬ DBì™€ ì—°ê²°

$ìœ¼ë¡œ ë³€ìˆ˜ ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ë¶€ë¶„ì„ ë¡œì»¬ ì‚¬ìš©ì í™˜ê²½ì— ë§ê²Œ ë³€ê²½

## ğŸ“ Frontend ë¹Œë“œ ê°€ì´ë“œ

> ### ì‹¤í–‰

- /frontend ë¡œ ì´ë™

- VsCodeë¡œ í”„ë¡œì íŠ¸ ì—´ê¸°
- Node_modulesë¥¼ ìœ„í•œ ê¸°ë³¸ install
  ```bash
  npm install
  ```
- npm start
  ```bash
  npm start
  ```
  > ### ë¹Œë“œ
  ```bash
  npm run build
  ```

## ğŸ–¼ Amazon S3 ì„¤ì •

> ### **AWS ë¡œê·¸ì¸**

AWS S3ì— ë¡œê·¸ì¸í•©ë‹ˆë‹¤.

> ### **Buckets ìƒì„±**

- Buckets ì´ë¦„ ì„¤ì •

  <img src="https://user-images.githubusercontent.com/64150747/201605782-1a7f5a57-1a62-41e6-be60-692e0f8cd685.png" width="600"/>

- ì•¡ì„¸ìŠ¤ ì°¨ë‹¨ í•´ì œ

  <img src="https://user-images.githubusercontent.com/64150747/201605885-12072207-1cf5-4288-9280-c97f9d27bf49.png" width="600"/>

- ìƒì„±ëœ Buckets í™•ì¸

  ![image](https://user-images.githubusercontent.com/64150747/201606117-9203e0ae-8a1b-4eaf-873f-84dc9345bf22.png)

> ### Buckets ì •ì±… ì…ë ¥

- ìƒì„±ëœ Buckets í´ë¦­ > ê¶Œí•œ > ë²„í‚· ì •ì±… í¸ì§‘

  <img src="https://user-images.githubusercontent.com/64150747/201606558-0de63fa0-b291-4aae-85c5-a609f57f2405.png" width="600"/>

  ë²„í‚· ARN ë³µì‚¬ í›„ ì •ì±… ìƒì„±ê¸° í´ë¦­

- ì •ì±… ìƒì„±

    <img src="https://user-images.githubusercontent.com/64150747/201606621-63dbc39e-9be5-4ce6-9980-8b23b5081766.png" width="600"/>

  - Select Type of Policy : S3 Bucket Policy

  - Effect : Allow

  - Principal : \*

  - Actions : GetObject, PutObject ì„ íƒ

  - Amazon Resource Name (ARN) : {ë³µì‚¬í•œ ARN}/\*

- Add statement > Generate Policy í´ë¦­í•´ ì •ì±… ìƒì„±

  <img src="https://user-images.githubusercontent.com/64150747/201606682-ca66f3b6-e18e-4a5e-a3c3-363b19be619e.png" width="600"/>

- ì •ì±… í¸ì§‘

  ìƒì„±ëœ ì •ì±… ì ìš© í›„ ì €ì¥

  <img src="https://user-images.githubusercontent.com/64150747/201608977-956c6aec-1778-4ce1-984c-2812cf5d392e.png" width="600"/>

> ### **AccessKey, SecretKey ë°œê¸‰**

- ê³„ì • ë¡œê·¸ì¸ì„ í•˜ê³  ì„œë¹„ìŠ¤ ì°¾ê¸°ì—ì„œ IAM ê²€ìƒ‰

  <img src="https://user-images.githubusercontent.com/64150747/201610374-32ab7f19-690d-4295-87e3-3e7730a8cff9.png" width="600"/>

- ì¢Œì¸¡ ë©”ë‰´ë°” ì—ì„œ ê·¸ë£¹ í´ë¦­

  <img src="https://user-images.githubusercontent.com/64150747/201610624-bde798c7-521f-4fd5-ac18-272a6b17c19f.png" width="600"/>

- S3FullAccessì™€ IAMFullAccessì •ì±… ì—°ê²°

  <img src="https://user-images.githubusercontent.com/64150747/201610549-28e26d47-82fa-4969-a2e3-a6e42ba10ddb.png" width="600"/>

- User ìƒì„±ì„ ìœ„í•´ ì¢Œì¸¡ ë©”ë‰´ë°” ì—ì„œ ì‚¬ìš©ì í´ë¦­

- ì—‘ì„¸ìŠ¤ ìœ í˜• í”„ë¡œê·¸ë˜ë°ë°©ì‹ ì—‘ì„¸ìŠ¤ë¡œ ì²´í¬

  <img src="https://user-images.githubusercontent.com/64150747/201611432-119f0c1c-2b1b-4f71-a827-52d36655c470.png" width="600"/>

- ë°©ê¸ˆ ìƒì„±í•œ ê·¸ë£¹ ì„ íƒ

  <img src="https://user-images.githubusercontent.com/64150747/201611537-2d12db2b-7c0e-4ca0-85ce-f5d6e82f29f6.png" width="600"/>

- ë°œê¸‰ ì™„ë£Œ

  <img src="https://user-images.githubusercontent.com/64150747/201611590-7920279b-aec9-4b9f-acfb-840bf6099817.png" width="600"/>

- application-key.properties

  ```properties
  #s3
  s3-bucket={bucket-name}
  aws-region=ap-northeast-2
  aws-accessKey={aws-accessKey}
  aws-secretKey={aws-secretKey}
  ```

  application-key.properties íŒŒì¼ì— ì…ë ¥

## ğŸ§µ OAuth ì„¤ì •

> ### **Google**

- Google Cloud Console ë¡œê·¸ì¸ í›„ ìƒˆ í”„ë¡œì íŠ¸ ìƒì„± 

- ì¢Œì¸¡ ìƒë‹¨ íƒìƒ‰ ë©”ë‰´ => API ë° ì„œë¹„ìŠ¤ => ì‚¬ìš©ì ì¸ì¦ ì •ë³´

![image-20221116095853911](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20221116095853911.png)

- ìƒë‹¨ ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸° => OAuth í´ë¼ì´ì–¸íŠ¸ ID

![image-20221116101816097](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20221116101816097.png)

- ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ í˜•
  - ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜

- ì´ë¦„
  - apicloud OAuth2
- ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URI ì¶”ê°€
  - https://apiclouds.net/api/oauth2/callback/google
  - http://localhost/api/oauth2/callback/google

- ìƒì„±ëœ í´ë¼ì´ì–¸íŠ¸ ID, ë³´ì•ˆ ë¹„ë°€ë²ˆí˜¸ ì €ì¥

> ### **Github**

- Github ìš°ì¸¡ ìƒë‹¨ í”„ë¡œí•„ í´ë¦­ => setting

- ì¢Œì¸¡ í•˜ë‹¨ Developer settings í´ë¦­
- OAuth Apps => new OAtuth App

![image-20221116103029984](C:\Users\multicampus\AppData\Roaming\Typora\typora-user-images\image-20221116103029984.png)

- Application name
  - APICloud
- Homepage URL
  - https://apiclouds.net
- Authorization callbakc URL
  - https://apiclouds.net/api/oauth2/callback/github

- Client Id, Client secrets ì €ì¥

> ### **applicaion.properties**

```properties
spring.security.oauth2.client.registration.google.client-id={google-clientId}
spring.security.oauth2.client.registration.google.client-secret={google-secret}
spring.security.oauth2.client.registration.google.scope=profile,email
spring.security.oauth2.client.registration.google.redirect-uri={google-callback-url}
spring.security.oauth2.client.registration.github.client-id={github-clientId}
spring.security.oauth2.client.registration.github.client-secret={github-secret}
spring.security.oauth2.client.registration.github.scope=user:email,read:user
spring.security.oauth2.client.registration.github.redirect-uri={github-callback-url}

app.auth.token-secret=7JWI64WV7ZWY7IS47JqUIOq5gOyasOybkCDsnoXri4jri6QuIOyLuO2UvCA36riwIEIyMDUg7JiB7KCc67Cc6rW064uoIO2ZlOydtO2MhQ==
app.auth.token-expiration-msec=8640000000
app.o-auth2.authorized-redirect-uris=http://localhost:3000/oauth2/redirect

```





















